import{w as h,x as l,j as e,y as F,I as w,S as L,M,B as g,z as f,D as j,E as v,r as u,G as S,J as A,K as H,L as O,O as q,Q,U as V,V as G,W as J}from"./vendor-D9sbH_qW.js";import{s as K,a as N,b as U,f as W,c as _,L as b,r as X,d as Y,e as Z,g as ee}from"../index.js";import{g as te,C as re}from"./getCarInfo-26oSzp43.js";import{B as C}from"./Button-DQJWfubB.js";const oe=t=>t.cars.items,se=t=>t.cars.isLoading,ae=t=>t.cars.isLoadingMore,ne=t=>t.cars.error,ie=t=>t.brands.brands,le=t=>t.brands.isLoading,ce=t=>t.brands.error,P=({filters:t})=>t.carBrand,z=({filters:t})=>t.carPrice,T=({filters:t})=>t.carMileage,de=(t="",s="",a={from:"",to:""})=>{const n={};return t!==""&&(n.brand=t),s!==""&&(n.rentalPrice=s),a.from!==""&&(n.minMileage=a.from),a.to!==""&&(n.maxMileage=a.to),n},y={formControl:{width:"22.1%",fontSize:"16px",fontWeight:"500",lineHeight:"1.25",color:"var(--main)",backgroundColor:"var(--inputs)",borderRadius:"12px",border:"none","& fieldset":{borderRadius:"12px",border:"none"}}},xe=()=>{const t=h(),s=l(ie),a=l(P),n=o=>{t(K(o.target.value))};return e.jsxs(F,{sx:y.formControl,children:[e.jsx(w,{id:"car-brand-select-label",children:"Choose a brand"}),e.jsx(L,{labelId:"car-brand-select-label",id:"car-brand-select",value:a,label:"Choose a brand",onChange:n,style:y.select,children:s.map((o,i)=>e.jsx(M,{value:o,children:o},o+i))})]})},pe=()=>Array.from({length:10},(t,s)=>(s+1)*10),I={formControl:{width:"21%",fontSize:"16px",fontWeight:"500",lineHeight:"1.25",color:"var(--main)",backgroundColor:"var(--inputs)",borderRadius:"12px",border:"none","& fieldset":{borderRadius:"12px",border:"none"}}},he=()=>{const t=h(),s=l(z),a=pe(),n=o=>{t(N(o.target.value))};return e.jsxs(F,{sx:I.formControl,children:[e.jsx(w,{id:"car-price-select-label",children:"Choose a price"}),e.jsx(L,{labelId:"car-price-select-label",id:"car-price-select",value:s,label:"Choose a price",onChange:n,style:I.select,children:a.map((o,i)=>e.jsx(M,{value:o,children:o},o+i))})]})},p={container:{position:"relative",width:"34.65%"},label:{position:"absolute",top:"-9px",left:"15px",zIndex:99,fontWeight:400,fontSize:"12px",lineHeight:1.33},formControl:{display:"flex",flexDirection:"row",fontSize:"16px",fontWeight:"500",lineHeight:"1.25",color:"var(--main)",borderRadius:"12px",border:"none",overflow:"hidden"},textField:{padding:"12px 5px 12px 24px",alignItems:"baseline",backgroundColor:"var(--inputs)",border:"none"},separator:{width:"2px",backgroundColor:"var(--gray-light)"}},ge=()=>{const t=h(),{from:s,to:a}=l(T),n=i=>i.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","),o=i=>{const{name:d,value:x}=i.target,m=x.replace(/,/g,"");t(U({name:d,value:m}))};return e.jsxs(g,{sx:p.container,children:[e.jsx(f,{color:"primary",sx:p.label,children:"Ð¡ar mileage / km"}),e.jsxs(g,{sx:p.formControl,children:[e.jsx(j,{sx:p.textField,name:"from",startAdornment:e.jsx(v,{position:"start",children:"From"}),onChange:o,value:n(s),autoComplete:"off"}),e.jsx("span",{style:p.separator}),e.jsx(j,{sx:p.textField,name:"to",startAdornment:e.jsx(v,{position:"start",children:"To"}),onChange:o,value:n(a),autoComplete:"off"})]})]})},B={container:{maxWidth:"924px",margin:"0 auto",marginBottom:"56px",display:"flex",flexWrap:"wrap",flexDirection:"row",alignItems:"stretch",gap:"16px"},button:{width:"17%"}},me=({setQueryParamsOfFilters:t})=>{const s=h(),a=l(P),n=l(z),o=l(T),i=()=>{const d=de(a,n,o);s(W(d)),t(d),s(_())};return e.jsxs(g,{sx:B.container,children:[e.jsx(xe,{}),e.jsx(he,{}),e.jsx(ge,{}),e.jsx(C,{style:B.button,onClick:i,children:"Search"})]})},fe=t=>t.favorites.items,c={card:{width:"calc((100% - 32px*3)/4)",height:"424px",boxShadow:"none"},imgWrapper:{position:"relative"},img:{width:"100%",height:"268px",marginBottom:"16px",borderRadius:"14px",objectFit:"cover"},favoriteButton:{position:"absolute",top:"16px",right:"16px",zIndex:99,width:"16px",height:"15px"},favoriteFillIcon:{color:"var(--button)"},favoriteBorderIcon:{color:"var(--badges)"},cardContent:{padding:"0px",height:"33%",display:"flex",flexDirection:"column",justifyContent:"space-between","&:last-child":{paddingBottom:"0px"}},carInfoTitle:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",fontWeight:500,fontSize:"16px",lineHeight:1.25,"& span":{color:"var(--button)"}},carInfoTextWrapper:{display:"flex",flexDirection:"column",justifyContent:"space-between",gap:"8px"},carInfoText:{marginBottom:"auto",fontWeight:400,fontSize:"12px",lineHeight:1.33,color:"var(--gray)"},readMoreButton:{width:"100%"},loadMoreButton:{display:"flex",margin:"0 auto",marginTop:"80px",width:"156px"},loaderWrapper:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:"80px",height:"40px"}},ue=({queryParamsOfFilters:t})=>{const[s,a]=u.useState(1),n=S(),o=h(),i=l(oe),d=l(ae),x=l(fe);if(!i)return e.jsx(b,{size:60});const{cars:m=[],totalCars:k}=i,R=m.map(r=>({...r,carInfo:te(r)})),E=r=>{x.includes(r)?o(X(r)):o(Y(r))},D=r=>{n(`/catalog/${r}`)},$=()=>{o(Z({page:s+1,...t})),a(s+1)};return e.jsxs(e.Fragment,{children:[e.jsx(A,{container:!0,rowSpacing:6,columnSpacing:4,children:R.map(r=>e.jsxs(H,{sx:c.card,children:[e.jsxs(g,{sx:c.imgWrapper,children:[e.jsx(O,{component:"img",height:"180",image:r.img,alt:`Foto of ${r.brand}`,sx:c.img}),e.jsx(q,{onClick:()=>E(r.id),sx:c.favoriteButton,children:x.includes(r.id)?e.jsx(Q,{sx:c.favoriteFillIcon}):e.jsx(V,{sx:c.favoriteBorderIcon})})]}),e.jsxs(G,{sx:c.cardContent,children:[e.jsxs("div",{style:c.carInfoTextWrapper,children:[e.jsxs(g,{sx:c.carInfoTitle,children:[e.jsxs(f,{variant:"subtitle1",children:[r.brand," ",e.jsx("span",{children:r.model}),", ",r.year]}),e.jsxs(f,{variant:"subtitle1",children:["$",r.rentalPrice]})]}),e.jsxs(f,{sx:c.carInfoText,children:[r.carInfo.city," | ",r.carInfo.country," |"," ",r.carInfo.company," | ",e.jsx("br",{}),r.carInfo.type," | ",r.carInfo.mileage," km"]})]}),e.jsx(C,{style:c.readMoreButton,onClick:()=>D(r.id),children:"Read more"})]})]},r.id))}),d?e.jsx("div",{style:c.loaderWrapper,children:e.jsx(b,{size:30})}):m.length<k&&e.jsx(C,{style:c.loadMoreButton,variant:"outlined",onClick:$,disabled:d,children:"Load more"})]})},ye=()=>{const[t,s]=u.useState({}),a=h(),n=S(),o=l(se),i=l(le),d=l(ne),x=l(ce);return u.useEffect(()=>{a(W()),a(ee())},[a]),o||i?e.jsx(b,{size:60}):d||x?e.jsx(J,{severity:"error",sx:{width:"50%",margin:"0 auto",marginTop:"20px"},onClose:()=>n("/"),children:d?.message||x?.message}):e.jsxs(re,{children:[e.jsx(me,{setQueryParamsOfFilters:s}),e.jsx(ue,{queryParamsOfFilters:t})]})};export{ye as default};
//# sourceMappingURL=CatalogPage-DLvkcKs3.js.map
