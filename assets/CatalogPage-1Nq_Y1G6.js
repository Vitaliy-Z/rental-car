import{j as t,l as M,m as x,n as a,F as b,I as C,S as j,M as y,B as d,o as p,p as g,q as h,G as P,s as R,t as k,v as T,w as $,x as A,y as E,r as H,z as D}from"./vendor-D39fZIgC.js";import{s as G,a as q,b as V,f as v,c as N,L as B,d as Q}from"../index.js";import{B as I}from"./Button-CQ5vXt98.js";const U=e=>e.cars.items,_=e=>e.cars.isLoading,J=e=>e.cars.error,K=e=>e.brands.brands,O=e=>e.brands.isLoading,X=e=>e.brands.error,Y={container:{maxWidth:"1440px",margin:"0 auto",padding:"84px 120px 124px 120px"}},Z=({children:e})=>t.jsx(M,{maxWidth:"1440px",sx:Y.container,disableGutters:!0,children:e}),F=({filters:e})=>e.carBrand,w=({filters:e})=>e.carPrice,S=({filters:e})=>e.carMileage,ee=(e="",o="",n={from:"",to:""})=>{const s={};return e!==""&&(s.brand=e),o!==""&&(s.rentalPrice=o),n.from!==""&&(s.minMileage=n.from),n.to!==""&&(s.maxMileage=n.to),s},m={formControl:{width:"22.1%",fontSize:"16px",fontWeight:"500",lineHeight:"1.25",color:"var(--main)",backgroundColor:"var(--inputs)",borderRadius:"12px",border:"none","& fieldset":{borderRadius:"12px",border:"none"}}},te=()=>{const e=x(),o=a(K),n=a(F),s=r=>{e(G(r.target.value))};return t.jsxs(b,{sx:m.formControl,children:[t.jsx(C,{id:"car-brand-select-label",children:"Choose a brand"}),t.jsx(j,{labelId:"car-brand-select-label",id:"car-brand-select",value:n,label:"Choose a brand",onChange:s,style:m.select,children:o.map((r,i)=>t.jsx(y,{value:r,children:r},r+i))})]})},re=()=>Array.from({length:10},(e,o)=>(o+1)*10),u={formControl:{width:"21%",fontSize:"16px",fontWeight:"500",lineHeight:"1.25",color:"var(--main)",backgroundColor:"var(--inputs)",borderRadius:"12px",border:"none","& fieldset":{borderRadius:"12px",border:"none"}}},oe=()=>{const e=x(),o=a(w),n=re(),s=r=>{e(q(r.target.value))};return t.jsxs(b,{sx:u.formControl,children:[t.jsx(C,{id:"car-price-select-label",children:"Choose a price"}),t.jsx(j,{labelId:"car-price-select-label",id:"car-price-select",value:o,label:"Choose a price",onChange:s,style:u.select,children:n.map((r,i)=>t.jsx(y,{value:r,children:r},r+i))})]})},c={container:{position:"relative",width:"34.65%"},label:{position:"absolute",top:"-9px",left:"15px",zIndex:99,fontWeight:400,fontSize:"12px",lineHeight:1.33},formControl:{display:"flex",flexDirection:"row",fontSize:"16px",fontWeight:"500",lineHeight:"1.25",color:"var(--main)",borderRadius:"12px",border:"none",overflow:"hidden"},textField:{padding:"12px 5px 12px 24px",alignItems:"baseline",backgroundColor:"var(--inputs)",border:"none"},separator:{width:"2px",backgroundColor:"var(--gray-light)"}},ne=()=>{const e=x(),{from:o,to:n}=a(S),s=i=>i.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","),r=i=>{const{name:W,value:z}=i.target,L=z.replace(/,/g,"");e(V({name:W,value:L}))};return t.jsxs(d,{sx:c.container,children:[t.jsx(p,{color:"primary",sx:c.label,children:"Ð¡ar mileage / km"}),t.jsxs(d,{sx:c.formControl,children:[t.jsx(g,{sx:c.textField,name:"from",startAdornment:t.jsx(h,{position:"start",children:"From"}),onChange:r,value:s(o),autoComplete:"off"}),t.jsx("span",{style:c.separator}),t.jsx(g,{sx:c.textField,name:"to",startAdornment:t.jsx(h,{position:"start",children:"To"}),onChange:r,value:s(n),autoComplete:"off"})]})]})},f={container:{maxWidth:"924px",margin:"0 auto",marginBottom:"56px",display:"flex",flexWrap:"wrap",flexDirection:"row",alignItems:"stretch",gap:"16px"},button:{width:"17%"}},se=()=>{const e=x(),o=a(F),n=a(w),s=a(S),r=()=>{e(v(ee(o,n,s))),e(N())};return t.jsxs(d,{sx:f.container,children:[t.jsx(te,{}),t.jsx(oe,{}),t.jsx(ne,{}),t.jsx(I,{style:f.button,onClick:r,children:"Search"})]})},ae=e=>{const o=e.address.split(","),n=e.mileage.toLocaleString("en-US").replace(/,/g," ");return{city:o[1],country:o[2],company:e.rentalCompany,type:e.type,mileage:n}},l={card:{width:"calc((100% - 32px*3)/4)",height:"424px",boxShadow:"none"},imgWrapper:{position:"relative"},img:{width:"100%",height:"268px",marginBottom:"16px",borderRadius:"14px",objectFit:"cover"},favoriteButton:{position:"absolute",top:"16px",right:"16px",zIndex:99,width:"16px",height:"15px"},favoriteBorderIcon:{color:"var(--badges)"},cardContent:{padding:0},carInfoTitle:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px",fontWeight:500,fontSize:"16px",lineHeight:1.25,"& span":{color:"var(--button)"}},carInfoText:{marginBottom:"28px",fontWeight:400,fontSize:"12px",lineHeight:1.33,color:"var(--gray)"},readMoreButton:{width:"100%"}},ie=()=>{const{cars:e=[]}=a(U);if(!e)return t.jsx(B,{size:60});const o=e.map(r=>({...r,carInfo:ae(r)})),n=r=>{console.log("onFavoriteToggle",r)},s=r=>{console.log("onReadMore",r)};return t.jsx(P,{container:!0,rowSpacing:6,columnSpacing:4,children:o.map(r=>t.jsxs(R,{sx:l.card,children:[t.jsxs(d,{sx:l.imgWrapper,children:[t.jsx(k,{component:"img",height:"180",image:r.img,alt:`Foto of ${r.brand}`,sx:l.img}),t.jsx(T,{onClick:()=>n(r.id),sx:l.favoriteButton,children:t.jsx($,{sx:l.favoriteBorderIcon})})]}),t.jsxs(A,{sx:l.cardContent,children:[t.jsxs(d,{sx:l.carInfoTitle,children:[t.jsxs(p,{variant:"subtitle1",children:[r.brand," ",t.jsx("span",{children:r.model}),", ",r.year]}),t.jsxs(p,{variant:"subtitle1",children:["$",r.rentalPrice]})]}),t.jsxs(p,{sx:l.carInfoText,children:[r.carInfo.city," | ",r.carInfo.country," | ",r.carInfo.company,"|",t.jsx("br",{}),r.carInfo.type," | ",r.carInfo.mileage," km"]}),t.jsx(I,{style:l.readMoreButton,onClick:()=>s(r.id),children:"Read more"})]})]},r.id))})},xe=()=>{const e=x(),o=E(),n=a(_),s=a(O),r=a(J),i=a(X);return H.useEffect(()=>{e(v()),e(Q())},[e]),n||s?t.jsx(B,{size:60}):r||i?t.jsx(D,{severity:"error",sx:{width:"50%",margin:"0 auto",marginTop:"20px"},onClose:()=>o("/"),children:r?.message||i?.message}):t.jsxs(Z,{children:[t.jsx(se,{}),t.jsx(ie,{})]})};export{xe as default};
//# sourceMappingURL=CatalogPage-1Nq_Y1G6.js.map
