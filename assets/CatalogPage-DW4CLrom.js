import{j as e,l as k,m as x,n as l,F as B,I as F,S as w,M as L,B as p,o as g,p as C,q as j,r as M,G as $,s as A,t as E,v as D,w as H,x as G,y as q,z as V}from"./vendor-D39fZIgC.js";import{s as N,a as O,b as Q,f as S,c as U,L as f,d as _,e as J}from"../index.js";import{B as b}from"./Button-D4ppg2zS.js";const K=t=>t.cars.items,X=t=>t.cars.isLoading,Y=t=>t.cars.isLoadingMore,Z=t=>t.cars.error,ee=t=>t.brands.brands,te=t=>t.brands.isLoading,re=t=>t.brands.error,oe={container:{maxWidth:"1440px",margin:"0 auto",padding:"84px 120px 124px 120px"}},ne=({children:t})=>e.jsx(k,{maxWidth:"1440px",sx:oe.container,disableGutters:!0,children:t}),W=({filters:t})=>t.carBrand,T=({filters:t})=>t.carPrice,z=({filters:t})=>t.carMileage,se=(t="",n="",a={from:"",to:""})=>{const s={};return t!==""&&(s.brand=t),n!==""&&(s.rentalPrice=n),a.from!==""&&(s.minMileage=a.from),a.to!==""&&(s.maxMileage=a.to),s},y={formControl:{width:"22.1%",fontSize:"16px",fontWeight:"500",lineHeight:"1.25",color:"var(--main)",backgroundColor:"var(--inputs)",borderRadius:"12px",border:"none","& fieldset":{borderRadius:"12px",border:"none"}}},ae=()=>{const t=x(),n=l(ee),a=l(W),s=r=>{t(N(r.target.value))};return e.jsxs(B,{sx:y.formControl,children:[e.jsx(F,{id:"car-brand-select-label",children:"Choose a brand"}),e.jsx(w,{labelId:"car-brand-select-label",id:"car-brand-select",value:a,label:"Choose a brand",onChange:s,style:y.select,children:n.map((r,i)=>e.jsx(L,{value:r,children:r},r+i))})]})},ie=()=>Array.from({length:10},(t,n)=>(n+1)*10),v={formControl:{width:"21%",fontSize:"16px",fontWeight:"500",lineHeight:"1.25",color:"var(--main)",backgroundColor:"var(--inputs)",borderRadius:"12px",border:"none","& fieldset":{borderRadius:"12px",border:"none"}}},le=()=>{const t=x(),n=l(T),a=ie(),s=r=>{t(O(r.target.value))};return e.jsxs(B,{sx:v.formControl,children:[e.jsx(F,{id:"car-price-select-label",children:"Choose a price"}),e.jsx(w,{labelId:"car-price-select-label",id:"car-price-select",value:n,label:"Choose a price",onChange:s,style:v.select,children:a.map((r,i)=>e.jsx(L,{value:r,children:r},r+i))})]})},d={container:{position:"relative",width:"34.65%"},label:{position:"absolute",top:"-9px",left:"15px",zIndex:99,fontWeight:400,fontSize:"12px",lineHeight:1.33},formControl:{display:"flex",flexDirection:"row",fontSize:"16px",fontWeight:"500",lineHeight:"1.25",color:"var(--main)",borderRadius:"12px",border:"none",overflow:"hidden"},textField:{padding:"12px 5px 12px 24px",alignItems:"baseline",backgroundColor:"var(--inputs)",border:"none"},separator:{width:"2px",backgroundColor:"var(--gray-light)"}},ce=()=>{const t=x(),{from:n,to:a}=l(z),s=i=>i.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","),r=i=>{const{name:h,value:m}=i.target,u=m.replace(/,/g,"");t(Q({name:h,value:u}))};return e.jsxs(p,{sx:d.container,children:[e.jsx(g,{color:"primary",sx:d.label,children:"Ð¡ar mileage / km"}),e.jsxs(p,{sx:d.formControl,children:[e.jsx(C,{sx:d.textField,name:"from",startAdornment:e.jsx(j,{position:"start",children:"From"}),onChange:r,value:s(n),autoComplete:"off"}),e.jsx("span",{style:d.separator}),e.jsx(C,{sx:d.textField,name:"to",startAdornment:e.jsx(j,{position:"start",children:"To"}),onChange:r,value:s(a),autoComplete:"off"})]})]})},I={container:{maxWidth:"924px",margin:"0 auto",marginBottom:"56px",display:"flex",flexWrap:"wrap",flexDirection:"row",alignItems:"stretch",gap:"16px"},button:{width:"17%"}},de=()=>{const t=x(),n=l(W),a=l(T),s=l(z),r=()=>{t(S(se(n,a,s))),t(U())};return e.jsxs(p,{sx:I.container,children:[e.jsx(ae,{}),e.jsx(le,{}),e.jsx(ce,{}),e.jsx(b,{style:I.button,onClick:r,children:"Search"})]})},xe=t=>{const n=t.address.split(","),a=t.mileage.toLocaleString("en-US").replace(/,/g," ");return{city:n[1],country:n[2],company:t.rentalCompany,type:t.type,mileage:a}},c={card:{width:"calc((100% - 32px*3)/4)",height:"424px",boxShadow:"none"},imgWrapper:{position:"relative"},img:{width:"100%",height:"268px",marginBottom:"16px",borderRadius:"14px",objectFit:"cover"},favoriteButton:{position:"absolute",top:"16px",right:"16px",zIndex:99,width:"16px",height:"15px"},favoriteBorderIcon:{color:"var(--badges)"},cardContent:{padding:"0px",height:"33%",display:"flex",flexDirection:"column",justifyContent:"space-between","&:last-child":{paddingBottom:"0px"}},carInfoTitle:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",fontWeight:500,fontSize:"16px",lineHeight:1.25,"& span":{color:"var(--button)"}},carInfoTextWrapper:{display:"flex",flexDirection:"column",justifyContent:"space-between",gap:"8px"},carInfoText:{marginBottom:"auto",fontWeight:400,fontSize:"12px",lineHeight:1.33,color:"var(--gray)"},readMoreButton:{width:"100%"},loadMoreButton:{display:"flex",margin:"0 auto",marginTop:"80px",width:"156px"},loaderWrapper:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:"80px",height:"40px"}},pe=()=>{const[t,n]=M.useState(1),a=x(),s=l(K),r=l(Y);if(!s)return e.jsx(f,{size:60});const{cars:i=[],totalCars:h}=s,m=i.map(o=>({...o,carInfo:xe(o)})),u=o=>{console.log("onFavoriteToggle",o)},P=o=>{console.log("onReadMore",o)},R=()=>{a(_({page:t+1})),n(t+1)};return e.jsxs(e.Fragment,{children:[e.jsx($,{container:!0,rowSpacing:6,columnSpacing:4,children:m.map(o=>e.jsxs(A,{sx:c.card,children:[e.jsxs(p,{sx:c.imgWrapper,children:[e.jsx(E,{component:"img",height:"180",image:o.img,alt:`Foto of ${o.brand}`,sx:c.img}),e.jsx(D,{onClick:()=>u(o.id),sx:c.favoriteButton,children:e.jsx(H,{sx:c.favoriteBorderIcon})})]}),e.jsxs(G,{sx:c.cardContent,children:[e.jsxs("div",{style:c.carInfoTextWrapper,children:[e.jsxs(p,{sx:c.carInfoTitle,children:[e.jsxs(g,{variant:"subtitle1",children:[o.brand," ",e.jsx("span",{children:o.model}),", ",o.year]}),e.jsxs(g,{variant:"subtitle1",children:["$",o.rentalPrice]})]}),e.jsxs(g,{sx:c.carInfoText,children:[o.carInfo.city," | ",o.carInfo.country," |"," ",o.carInfo.company," | ",e.jsx("br",{}),o.carInfo.type," | ",o.carInfo.mileage," km"]})]}),e.jsx(b,{style:c.readMoreButton,onClick:()=>P(o.id),children:"Read more"})]})]},o.id))}),r?e.jsx("div",{style:c.loaderWrapper,children:e.jsx(f,{size:30})}):i.length<h&&e.jsx(b,{style:c.loadMoreButton,variant:"outlined",onClick:R,disabled:r,children:"Load more"})]})},ue=()=>{const t=x(),n=q(),a=l(X),s=l(te),r=l(Z),i=l(re);return M.useEffect(()=>{t(S()),t(J())},[t]),a||s?e.jsx(f,{size:60}):r||i?e.jsx(V,{severity:"error",sx:{width:"50%",margin:"0 auto",marginTop:"20px"},onClose:()=>n("/"),children:r?.message||i?.message}):e.jsxs(ne,{children:[e.jsx(de,{}),e.jsx(pe,{})]})};export{ue as default};
//# sourceMappingURL=CatalogPage-DW4CLrom.js.map
